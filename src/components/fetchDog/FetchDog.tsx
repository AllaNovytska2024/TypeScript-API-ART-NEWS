import { useEffect, useState } from "react";
import MyButton from "../myButton/MyButton";
import "./fetchDog.css";

export default function FetchDog() {
  // –ø–∏—à–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –∏–∑ api
  interface IDog {
    message: string;
    status: string;
  }

  // —Å–æ–∑–¥–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –∫–ª–∞–¥–µ–º –≤ –Ω–µ–µ –Ω–∞—á–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –æ–±—ä–µ–∫—Ç —Å –Ω—É–∂–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏, –Ω–æ —Å –ø—É—Å—Ç—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏

  const [dog, setDog] = useState<IDog>({
    message: "",
    status: "",
  });

  // –æ–±—ä—è–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å fetch –∑–∞–ø—Ä–æ—Å–æ–º, –∫–æ—Ç–æ—Ä–∞—è –∫–ª–∞–¥–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ api –≤ state (—á—Ç–æ–±—ã –ø—Ä–∏ –Ω–æ–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ –º—ã –±—ã –æ–±–Ω–æ–≤–∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ)
  const fetchDog = () => {
    fetch("https://dog.ceo/api/breeds/image/random")
      .then((res) => res.json())
      // –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–ª–∞–¥–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å–æ—Å—Ç–æ—è–Ω–∏—è dog
      // —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é setDog –¥–ª—è –µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
      // –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç —Ä–µ—Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –º—ã –≤–∏–¥–∏–º –Ω–æ–≤—É—é üê∂
      .then((data) => setDog(data));
  };

  useEffect(() => {
    // –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –≤ –Ω–∞—á–∞–ª–µ –∂–∏–∑–Ω–µ–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    fetchDog();
  }, []);

  return (
    <div className="all-container">
      {/* –∫–Ω–æ–ø–∫–∞ –±—É–¥–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–∏—à–µ–¥—à–µ–π –∫–∞—Ä—Ç–∏–Ω–∫–∏ */}
      {dog.message && (
        <>
          <img className="dog-img" src={dog.message} alt="dog" />
          <MyButton isPrimary={true} text="update dog" onClick={fetchDog} />
        </>
      )}
    </div>
  );
}
