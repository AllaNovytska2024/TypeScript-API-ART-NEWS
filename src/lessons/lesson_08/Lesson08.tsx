import { useEffect, useState } from "react";
import MyButton from "../../components/forms/myButton/MyButton";

export default function Lesson08() {
  const [count, setCount] = useState<number>(0);
  const [toggle, setToggle] = useState<boolean>(true);

  const handleIncrease = (): void => {
    setCount((prev) => prev + 1);
  };

  const handleToggle = (): void => {
    setToggle(!toggle);
  };

  // –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è state –≤—ã–∑—ã–≤–∞–µ—Ç rerender –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
  // –æ–Ω –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –∑–∞–Ω–æ–≤–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
  // setCount(prev => prev + 1)

  // —Ö—É–∫ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ - —Å—Ç—Ä–µ–ª–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å –∑–∞–¥–∞–Ω–Ω—ã–º –¥–µ–π—Å—Ç–≤–∏–µ–º, –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π - –≤ –Ω–µ–º –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–∞–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –¥–∞–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
  useEffect(() => {
    // —ç—Ç–æ—Ç –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —ç—Ç–∞–ø–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ - mounting
    console.log("—ç—Ç–æ—Ç –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–∞–∑ –≤ –Ω–∞—á–∞–ª–µ");
  }, []);

  // * –∑–¥–µ—Å—å –º—ã —Å–º–æ–≥–ª–∏ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫ —á—Ç–æ–±—ã –¥–µ–π—Å—Ç–≤–∏–µ –≤ useEffect() –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –≤ –Ω–∞—á–∞–ª–µ –∂–∏–∑–Ω–µ–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è toggle
  // –¥–ª—è —ç—Ç–æ–≥–æ –º—ã –ø–æ–ª–æ–∂–∏–ª–∏ –µ–µ –≤ –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  useEffect(() => {
    console.log(
      "—ç—Ç–æ—Ç –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –Ω–∞—á–∞–ª–µ –∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ toggle, –∫–æ–≥–¥–∞ –ø—Ä—è—á–µ–º –ø–∞—Ä–∞–≥—Ä–∞—Ñ"
    );
  }, [toggle]);

  // ! –µ—Å–ª–∏ –º–∞—Å—Å–∏–≤ –ø—É—Å—Ç–æ–π - –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑

  // —ç—Ç–æ—Ç –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
  console.log("—ç—Ç–æ—Ç –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ ü´†");

  return (
    <div className="lesson-container">
      <h2>Lesson 8. useEffect() hook</h2>

      <p>
        –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ react –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –≤–∫–ª—é—á–∞–µ—Ç rerender –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
        (update). –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ —Ç–µ–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ä–∞–±–æ—Ç–∞—é—Ç –µ—â–µ —Ä–∞–∑
        (—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å):{" "}
      </p>

      <div>{count}</div>
      <MyButton text="increase" onClick={handleIncrease} />
      <p>
        –ö–æ–≥–¥–∞ –º—ã —Ö–æ—Ç–∏–º –∑–∞–¥–∞—Ç—å –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π –≤–Ω—É—Ç—Ä–∏ react –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –æ—Å–æ–±—ã–µ
        —É—Å–ª–æ–≤–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ö—É–∫ useEffect()
      </p>
      <MyButton
        isPrimary={true}
        text="hide paragraph bellow"
        onClick={handleToggle}
      />
      {/* –µ—Å–ª–∏ toggle true —Ç–æ –±–ª–æ–∫ –∫–æ–¥–∞ —Å–Ω–∏–∑—É –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω */}
      {toggle && (
        <>
          <p>
            –° –ø–æ–º–æ—â—å—é –Ω–µ–≥–æ –º—ã –º–æ–∂–µ–º –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –æ—Ç –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ
            –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–∑—ã–≤–∞—Ç—å –∏—Ö —Ç–æ–ª—å–∫–æ –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ
            —Ü–∏–∫–ª–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ - mounting
          </p>
        </>
      )}
    </div>
  );
}
